<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Python Basics Quiz (Sheet 1)</title>
  <!-- Prism.js for syntax highlighting -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #f9f9f9; }
    h1 { color: #2c3e50; }
    .question { margin-bottom: 20px; padding: 15px; background: #fff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .options { margin-top: 10px; }
    button { margin-top: 10px; padding: 6px 12px; border: none; border-radius: 5px; background: #3498db; color: white; cursor: pointer; }
    button:hover { background: #2980b9; }
    .feedback { margin-top: 8px; font-weight: bold; }
    #score { font-size: 18px; margin-top: 20px; padding: 10px; background: #ecf0f1; border-radius: 6px; }
    pre { background: #2d2d2d; padding: 10px; border-radius: 6px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>Quiz – Python Basics (Sheet 1)</h1>
  <p>Select your answers for each question (multiple answers may be correct), then click <b>Check</b>. At the bottom, click <b>Score quiz</b> to see your total.</p>
  <div id="quiz"></div>
  <button onclick="scoreQuiz()">Score quiz</button>
  <div id="score"></div>

<script>
// Utility: decode base64 and turn into array of numbers
function decodeAnswers(encoded) {
  return atob(encoded).split(',').map(Number);
}

const quiz = [
  {
    stem: "Which of the following Python statements correctly defines a function that returns the larger of two numbers a and b?",
    options: [
      "def sup(a, b):\\n    return a if a > b else b",
      "def sup(a, b):\\n    if a > b:\\n        return a\\n    else:\\n        return b",
      "def sup(a, b):\\n    return max(a, b)",
      "def sup(a, b):\\n    return min(a, b)"
    ],
    correctEncoded: "MCwxLDI="
  },
  {
    stem: "Given two complex numbers a and b, which expressions return their modulus?",
    options: [
      "abs(a)",
      "a.mod()",
      "(a.real**2 + a.imag**2)**0.5",
      "math.abs(a)"
    ],
    correctEncoded: "MCwy"
  },
  {
    stem: "What will sup(abs(3+4j), abs(1+1j)) return?",
    options: ["2","5","√2","3+4j"],
    correctEncoded: "MQ=="
  },
  {
    stem: "Which of the following functions correctly computes n! using a for loop?",
    options: [
      "def fact(n):\\n    result = 1\\n    for i in range(1, n+1):\\n        result *= i\\n    return result",
      "def fact(n): return n * fact(n-1)",
      "def fact(n):\\n    result = 1\\n    for i in range(n):\\n        result *= i\\n    return result",
      "def fact(n): return math.factorial(n)"
    ],
    correctEncoded: "MA=="
  },
  {
    stem: "What does the following list comprehension generate?",
    code: "[x1 + r*i for i in range(n)]",
    options: [
      "First n elements of an arithmetic sequence",
      "First n elements of a geometric sequence",
      "A list of repeated values x1",
      "A list of powers of r"
    ],
    correctEncoded: "MA=="
  },
  {
    stem: "What is the sum of the first 3 terms of the arithmetic sequence with x1=2 and r=5?",
    options: ["21","12","37","19"],
    correctEncoded: "MA==" // "0"
  },
  {
    stem: "Which of the following correctly describes the append method in Python?",
    options: [
      "Adds a new element at the end of a list",
      "Returns a new list with one more element",
      "Modifies the list in place",
      "Can only be used inside a loop"
    ],
    correctEncoded: "MCwy"
  },
  {
    stem: "What will the function below print if n=4?",
    code: "def triangle(n):\\n    for i in range(1, n+1):\\n        print('*'*i)",
    options: [
      "****\\n***\\n**\\n*",
      "*\\n**\\n***\\n****",
      "****\\n****\\n****\\n****",
      "*\\n*\\n*\\n*"
    ],
    correctEncoded: "MQ=="
  },
  {
    stem: "What will the function hide_vowels('Hello World') return?",
    code: "def hide_vowels(s):\\n    vowels = 'aeiouAEIOU'\\n    for v in vowels:\\n        s = s.replace(v, '*')\\n    return s",
    options: [
      "H*ll* W*rld",
      "Hello World",
      "**** *****",
      "Hollo World"
    ],
    correctEncoded: "MA=="
  },
  {
    stem: "Which of the following correctly computes the absolute value of a real number x without using built-in functions?",
    options: [
      "def my_abs(x):\\n    if x >= 0:\\n        return x\\n    else:\\n        return -x",
      "def my_abs(x): return x if x >= 0 else -x",
      "def my_abs(x): return abs(x)",
      "def my_abs(x): return x**2"
    ],
    correctEncoded: "MCwx"
  }
];

function renderQuiz() {
  const container = document.getElementById("quiz");
  quiz.forEach((q, qi) => {
    const div = document.createElement("div");
    div.className = "question";
    let html = `<b>Q${qi+1}.</b> ${q.stem}`;
    if (q.code) {
      const codeHtml = q.code.replace(/\\n/g, '\n');
      html += `<pre><code class="language-python">${codeHtml}</code></pre>`;
    }
    html += `<div class="options">`;
    q.options.forEach((opt, oi) => {
      const optText = opt.includes("def") ? `<pre><code class='language-python'>${opt.replace(/\\n/g, '\n')}</code></pre>` : opt;
      html += `<label><input type="checkbox" name="q${qi}" value="${oi}"> ${String.fromCharCode(65+oi)}. ${optText}</label><br>`;
    });
    html += `</div><button onclick="checkQuestion(${qi})">Check</button><div class="feedback" id="fb${qi}"></div>`;
    div.innerHTML = html;
    container.appendChild(div);
  });
  Prism.highlightAll();
}

function checkQuestion(qi) {
  const checkboxes = document.querySelectorAll(`input[name="q${qi}"]:checked`);
  const selected = Array.from(checkboxes).map(cb => parseInt(cb.value));
  const correct = decodeAnswers(quiz[qi].correctEncoded);
  const fb = document.getElementById("fb"+qi);
  if (JSON.stringify(selected.sort()) === JSON.stringify(correct.sort())) {
    fb.innerHTML = "✅ Correct!";
    fb.style.color = "green";
  } else {
    fb.innerHTML = "❌ Incorrect.";
    fb.style.color = "red";
  }
}

function scoreQuiz() {
  let total = 0;
  quiz.forEach((q, qi) => {
    const checkboxes = document.querySelectorAll(`input[name="q${qi}"]:checked`);
    const selected = Array.from(checkboxes).map(cb => parseInt(cb.value));
    const correct = decodeAnswers(q.correctEncoded);
    if (JSON.stringify(selected.sort()) === JSON.stringify(correct.sort())) {
      total++;
    }
  });
  document.getElementById("score").innerHTML = "Final Score: " + total + " / " + quiz.length;
}

renderQuiz();
</script>
</body>
</html>
